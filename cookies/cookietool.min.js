/*! cookietool 1.0.0 (built 2015-06-12) 
 *  Repository: https://github.com/ecoal95/CookieTool.git
 *  Author: Emilio Cobos <emiliocobos@usal.es> (http://emiliocobos.net)
 *  License: (MIT OR Apache-2.0) */
window.CookieTool=function(){},CookieTool.Utils={extend:function(a,b){var c,d=a;for(c in b)b.hasOwnProperty(c)&&(d[c]=b[c]);return d},loadScript:function(){var a=document.getElementsByTagName("script")[0];return function(b,c){var d,e=document.createElement("script");e.async=!0,e.onload=e.onreadystatechange=function(){d||e.readyState&&"complete"!==e.readyState&&"loaded"!==e.readyState||(d=!0,c&&"function"==typeof c&&c.call(null,e))},e.src=b,a.parentNode.insertBefore(e,a)}}()},CookieTool.Config=function(){var a={position:"top",message:'En este sitio se usan cookies para ofrecer una experiencia más personalizada. <a href="{{link}}" target="_blank">Más información</a>.<br>¿Nos consiente usar cookies?',link:"/cookies",agreetext:"Sí",declinetext:"No"};return{get:function(b){return a[b]},set:function(b,c){"string"==typeof b?a[b]=c:a=CookieTool.Utils.extend(a,b)}}}(),CookieTool.Event=function(){var a={};return{on:function(b,c){void 0===a[b]&&(a[b]=[]),"function"==typeof c&&a[b].push(c)},trigger:function(b){var c,d=a[b],e=0;if(d)for(c=d.length;c>e;e++)d[e]()}}}(),CookieTool.Cookie={get:function(a){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},set:function(a,b,c,d,e){var f,g=a+"="+encodeURIComponent(b);c&&(f=new Date,f.setTime(f.getTime()+24*c*60*60*1e3),g+="; expires="+f.toGMTString()),d&&(g+="; domain="+d),e||(e="/"),g+="; path="+e,document.cookie=g},remove:function(a,b){CookieTool.Cookie.set(a,"",-1,b)}},window.localStorage?CookieTool.Storage={get:function(a){return window.localStorage.getItem(a)},set:function(a,b){return window.localStorage.setItem(a,b)},remove:function(a){return window.localStorage.removeItem(a)}}:CookieTool.Storage=CookieTool.Cookie,CookieTool.API={statuses:{AGREE:"1",DECLINE:"0",UNDETERMINED:null},status:function(a){return void 0===a?CookieTool.Storage.get("ctstatus"):CookieTool.API.statuses[a]?CookieTool.Storage.set("ctstatus",CookieTool.API.statuses[a],365):CookieTool.Storage.set("ctstatus",a,365)},ask:function(){var a,b=document.body;return CookieTool.API.status()===CookieTool.API.statuses.AGREE?CookieTool.API.agree():CookieTool.API.status()===CookieTool.API.statuses.DECLINE?CookieTool.API.decline():(a=document.createElement("div"),a.className="cookietool-message cookietool-message-"+CookieTool.Config.get("position"),b.className+=" cookietool",a.onclick=function(c){var d,e;return c=c||window.event,d=c.target||c.srcElement,e=d.getAttribute("data-action"),e&&CookieTool.API[e]?(CookieTool.API[e](),c.preventDefault?c.preventDefault():c.returnValue=!1,a.parentNode.removeChild(a),b.className=b.className.replace(/\bcookietool\b/,""),!1):void 0},a.innerHTML="<p>"+CookieTool.Config.get("message").replace(/\{\{link\}\}/g,CookieTool.Config.get("link"))+'</p><button data-action="agree" onclick="">'+CookieTool.Config.get("agreetext")+'</button> <button data-action="decline" onclick="">'+CookieTool.Config.get("declinetext")+"</button>",void b.appendChild(a))},impliedAgreement:function(){var a=CookieTool.API.status();switch(a){case CookieTool.API.statuses.DECLINE:CookieTool.API.decline();break;default:CookieTool.API.agree()}},displaySettings:function(a){var b=CookieTool.API.status();a&&(a.className+=" cookietool-settings",a.onclick=function(b){var c,d;return b=b||window.event,c=b.target||b.srcElement,d=c.getAttribute("data-action"),d&&CookieTool.API[d]?(CookieTool.API[d](),CookieTool.API.displaySettings(a),b.preventDefault?b.preventDefault():b.returnValue=!1,!1):void 0},b===CookieTool.API.statuses.AGREE?a.innerHTML='Actualmente <strong>aceptas</strong> el uso de cookies en el sitio. <a role="button" data-action="decline" href="#">Pulsa aquí para no permitir cookies</a>':b===CookieTool.API.statuses.DECLINE?a.innerHTML='Actualmente <strong>no aceptas</strong> el uso de cookies en el sitio. <a role="button" data-action="agree" href="#">Pulsa aquí para permitir cookies</a>':a.innerHTML='Aún no has establecido tu configuración. Haz click <a role="button" data-action="agree" href="#">aquí</a> si quieres aceptar el uso de cookies, o <a role="button" data-action="decline" href="#">aquí</a> si no.')},agree:function(){CookieTool.API.status("AGREE"),CookieTool.Event.trigger("agree")},decline:function(){CookieTool.API.status("DECLINE"),CookieTool.Event.trigger("decline")}},document.getElementById("cookietool-settings")&&CookieTool.API.displaySettings(document.getElementById("cookietool-settings")),CookieTool.Event.on("agree",function(){window.adsbygoogle&&CookieTool.Utils.loadScript("http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"),window._gaq?CookieTool.Utils.loadScript(("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js"):window.ga&&CookieTool.Utils.loadScript("//wwww.google-analytics.com/analytics.js")}),CookieTool.Event.on("decline",function(){var a=["__utma","__utmb","__utmc","__utmz","__utmv"],b=0,c=a.length,d=window.location.hostname;for(/^www\./.test(d)&&(d=d.substring(4));c>b;b++)CookieTool.Cookie.remove(a[b],d)});